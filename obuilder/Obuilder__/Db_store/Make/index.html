<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (obuilder.Obuilder__.Db_store.Make)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">obuilder</a> &#x00BB; <a href="../../index.html">Obuilder__</a> &#x00BB; <a href="../index.html">Db_store</a> &#x00BB; Make</nav><h1>Module <code>Db_store.Make</code></h1></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-Raw/index.html">Raw</a> : <a href="../../../Obuilder/S/index.html#module-type-STORE">Obuilder.S.STORE</a></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-build"><a href="#val-build" class="anchor"></a><code><span class="keyword">val</span> build : <span>?&#8288;switch:Lwt_switch.t</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;base:<a href="../../../Obuilder/S/index.html#type-id">Obuilder.S.id</a></span> <span>&#45;&gt;</span> <span>id:<a href="../../../Obuilder/S/index.html#type-id">Obuilder.S.id</a></span> <span>&#45;&gt;</span> <span>log:<a href="../../../Obuilder/S/index.html#type-logger">Obuilder.S.logger</a></span> <span>&#45;&gt;</span> <span>(<span>cancelled:<span>unit Lwt.t</span></span> <span>&#45;&gt;</span> <span>log:<a href="../../../Obuilder/Build_log/index.html#type-t">Obuilder.Build_log.t</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(unit, <span>[ `Cancelled <span><span>| `Msg</span> of string</span> ]</span>)</span> Lwt_result.t</span>)</span> <span>&#45;&gt;</span> <span><span>(<a href="../../../Obuilder/S/index.html#type-id">Obuilder.S.id</a>, <span>[ `Cancelled <span><span>| `Msg</span> of string</span> ]</span>)</span> Lwt_result.t</span></code></dt><dd><p><code>build t ~id ~log fn</code> ensures that <code>id</code> is cached, using <code>fn ~cancelled ~log dir</code> to build it if not. If <code>cancelled</code> resolves, the build should be cancelled. If <code>id</code> is already in the process of being built, this just attaches to the existing build.</p><dl><dt>parameter switch</dt><dd><p>Turn this off if you no longer need the result. The build will be cancelled if no-one else is waiting for it.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-delete"><a href="#val-delete" class="anchor"></a><code><span class="keyword">val</span> delete : <span>?&#8288;log:<span>(<a href="../../../Obuilder/S/index.html#type-id">Obuilder.S.id</a> <span>&#45;&gt;</span> unit)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../Obuilder/S/index.html#type-id">Obuilder.S.id</a> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-prune"><a href="#val-prune" class="anchor"></a><code><span class="keyword">val</span> prune : <span>?&#8288;log:<span>(<a href="../../../Obuilder/S/index.html#type-id">Obuilder.S.id</a> <span>&#45;&gt;</span> unit)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>before:Unix.tm</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span>int Lwt.t</span></code></dt><dt class="spec value" id="val-result"><a href="#val-result" class="anchor"></a><code><span class="keyword">val</span> result : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../Obuilder/S/index.html#type-id">Obuilder.S.id</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dt class="spec value" id="val-cache"><a href="#val-cache" class="anchor"></a><code><span class="keyword">val</span> cache : <span>user:<a href="../../../../obuilder-spec/Obuilder_spec/index.html#type-user">Obuilder_spec.user</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(string * <span>(unit <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-wrap"><a href="#val-wrap" class="anchor"></a><code><span class="keyword">val</span> wrap : <a href="argument-1-Raw/index.html#type-t">Raw.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl></div></body></html>